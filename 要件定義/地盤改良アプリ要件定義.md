# 地盤改良杭三次元モデル生成Webアプリケーション要件定義書

## 1. システム概要

本システムは、ICT施工データから地盤改良杭の3Dモデルと属性情報を生成・管理するWebアプリケーションです。ユーザー管理機能とプロジェクト管理機能を備え、CSVファイルのアップロードから3Dモデルの生成・表示・エクスポートまでをブラウザ上で実現します。

## 2. 機能要件

### 2.1. ユーザー管理機能

- ユーザー登録・ログイン・ログアウト機能
- ユーザー権限管理（管理者・一般ユーザー）
- パスワードリセット機能
- ユーザープロファイル管理

### 2.2. プロジェクト管理機能

- プロジェクト作成・編集・削除
- プロジェクトメンバー追加・削除
- プロジェクト内のデータ一覧表示
- プロジェクト間のデータ移動・コピー

### 2.3. データアップロード・チェック機能

- CSVファイルのドラッグ&ドロップまたはファイル選択によるアップロード
- アップロードされたCSVファイルの基本エラーチェック
    - 必須項目の空欄チェック
    - データフォーマットの整合性チェック
    - 数値範囲の妥当性チェック
- エラー内容のわかりやすい表示と修正ガイダンス

### 2.4. 3Dモデル生成機能

- CSVデータから地盤改良杭の3Dモデル自動生成
- 属性情報の紐付け
- モデル生成状況のプログレス表示
- 生成完了通知

### 2.5. 3Dモデル表示・操作機能

- Autodesk Forge APIを利用した3Dモデルのブラウザ表示
- モデルの回転・ズーム・パン操作
- 断面表示機能
- 表示項目の表示/非表示切替
- 属性情報の表示

### 2.6. エクスポート機能

- DWGファイル形式でのエクスポート
- IFCファイル形式でのエクスポート
- エクスポート設定オプション（座標系、縮尺等）

### 2.7. 属性情報検索・分析機能

- 杭IDによる検索
- 属性値による検索（範囲指定可能）
- 検索結果のハイライト表示
- 属性データの集計・統計情報表示
- レポート出力機能

## 3. 非機能要件

### 3.1. 性能要件

- ファイルアップロード：最大100MBまでのCSVファイル処理
- モデル生成時間：1000本の杭データで5分以内
- 同時接続ユーザー：50人まで安定動作

### 3.2. セキュリティ要件

- ユーザー認証・認可
- データの暗号化保存
- セキュアな通信（HTTPS）
- アクセスログの記録

### 3.3. 可用性要件

- 稼働時間：24時間365日
- 計画メンテナンス以外のダウンタイムなし
- バックアップと復旧機能

### 3.4. 拡張性要件

- 将来的な機能追加を考慮したモジュール設計
- APIによる外部システム連携の可能性

## 4. システムアーキテクチャ

### 4.1. フロントエンド

- 言語/フレームワーク：HTML5, CSS3, JavaScript (React/Vue.js)
- 3Dビューア：Autodesk Forge Viewer
- レスポンシブデザイン対応

### 4.2. バックエンド

- 言語/フレームワーク：Node.js/Express または Python/Django
- DBアクセス層：ORM
- 3Dモデル生成エンジン：カスタム実装

### 4.3. データベース

- リレーショナルDB：PostgreSQL/MySQL
- ファイルストレージ：Amazon S3または同等サービス

### 4.4. 外部サービス連携

- Autodesk Forge API
- 認証サービス（OAuth2.0）
- クラウドストレージサービス

## 5. データモデル

### 5.1. ユーザーテーブル

- ユーザーID（主キー）
- メールアドレス
- パスワード（ハッシュ化）
- 氏名
- 権限レベル
- 最終ログイン日時

### 5.2. プロジェクトテーブル

- プロジェクトID（主キー）
- プロジェクト名
- 作成日時
- 更新日時
- 作成者ID（外部キー）

### 5.3. プロジェクトメンバーテーブル

- プロジェクトID（外部キー）
- ユーザーID（外部キー）
- 権限レベル

### 5.4. モデルデータテーブル

- モデルID（主キー）
- プロジェクトID（外部キー）
- モデル名
- 原本CSVファイルパス
- 生成3Dモデルファイルパス
- 作成日時
- 更新日時
- ステータス

### 5.5. 杭データテーブル

- 杭ID（主キー）
- モデルID（外部キー）
- 座標X
- 座標Y
- 座標Z
- 直径
- 長さ
- その他の属性情報（材質、施工日等）

## 6. 画面設計概要

### 6.1. ログイン画面

- ユーザーID/パスワード入力
- パスワードリセットリンク
- 新規ユーザー登録リンク

### 6.2. ダッシュボード画面

- プロジェクト一覧
- 最近のアクティビティ
- システム通知

### 6.3. プロジェクト詳細画面

- プロジェクト情報表示・編集
- メンバー管理
- モデル一覧

### 6.4. データアップロード画面

- ファイルドロップエリア
- ファイル選択ボタン
- アップロード進捗表示
- エラーチェック結果表示

### 6.5. 3Dモデル表示画面

- 3Dビューア（Autodesk Forge）
- 操作コントロール
- 属性情報サイドパネル
- エクスポートオプション

### 6.6. 属性検索・分析画面

- 検索条件入力フォーム
- 結果一覧表示
- グラフ・統計表示
- レポート出力オプション

## 7. 開発・運用計画

### 7.1. 開発フェーズ

1. 要件定義・設計（4週間）
2. フロントエンド開発（8週間）
3. バックエンド開発（10週間）
4. 3Dモデル生成エンジン開発（6週間）
5. Autodesk Forge連携（4週間）
6. 統合テスト（4週間）
7. ユーザー受け入れテスト（2週間）

### 7.2. 運用・保守要件

- システム監視体制
- バックアップ戦略
- 定期メンテナンス計画
- バージョンアップ計画

## 8. その他要件・制約

### 8.1. 法的要件

- 個人情報保護法対応
- 知的財産権の取り扱い

### 8.2. ユーザビリティ要件

- 直感的なUI/UX
- 操作ガイド・ヘルプ機能
- エラーメッセージの明確化

### 8.3. 制約条件

- Autodesk Forge APIの利用制限・コスト
- サーバーリソースの制約
- ブラウザ対応要件（Chrome, Firefox, Edgeの最新版をサポート）

## 9. リスク管理

- 大規模データ処理における性能リスク
- Autodesk Forge API仕様変更リスク
- セキュリティリスク対策
- スケジュール遅延リスク対策